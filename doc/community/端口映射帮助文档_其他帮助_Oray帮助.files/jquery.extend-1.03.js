jQuery.autocomplete=function(d,u){var p=this;var y=jQuery(d).attr("autocomplete","off");if(u.inputClass){y.addClass(u.inputClass)}var q=document.createElement("div");var h=jQuery(q);h.hide().addClass(u.resultsClass).css("position","absolute");if(u.width>0){h.css("width",u.width)}jQuery("body").append(q);d.autocompleter=p;var G=null;var x="";var H=-1;var j={};var z=false;var l=false;var a=null;function m(){j={};j.data={};j.length=0}m();if(u.data!=null){var s="",M={},n=[];if(typeof u.url!="string"){u.cacheLength=1}for(var K=0;K<u.data.length;K++){n=((typeof u.data[K]=="string")?[u.data[K]]:u.data[K]);if(n[0].length>0){s=n[0].substring(0,1).toLowerCase();if(!M[s]){M[s]=[]}M[s].push(n)}}for(var J in M){u.cacheLength++;e(J,M[J])}}y.keydown(function(i){a=i.keyCode;switch(i.keyCode){case 38:i.preventDefault();C(-1);break;case 40:i.preventDefault();C(1);break;case 9:case 13:if(E()){y.get(0).blur();i.preventDefault()}break;case 16:case 17:case 18:i.preventDefault();break;default:H=-1;if(G){clearTimeout(G)}G=setTimeout(function(){t()},u.delay);break}}).focus(function(){l=true;if(this.value.length>=u.minChars){B(this.value)}}).blur(function(){l=false;c()});v();function t(){if((a>8&&a<32)){return h.hide()}var i=y.val();if(u.rules&&!(a==46||a==8)){if(i!=u.rules(i)){y.val(u.rules(i))}}if(i==x){return}x=i;if(i.length>=u.minChars){y.addClass(u.loadingClass);B(i)}else{y.removeClass(u.loadingClass);h.hide()}}function C(k){var i=jQuery("li",q);if(!i){return}H+=k;if(H<0){H=i.size()-1}else{if(H>=i.size()){H=0}}i.removeClass("ac_over");jQuery(i[H]).addClass("ac_over")}function E(){var i=jQuery("li.ac_over",q)[0];if(!i){var k=jQuery("li",q);if(u.selectOnly){if(k.length==1){i=k[0]}}else{if(u.selectFirst){i=k[0]}}}if(i){r(i);return true}else{return false}}function r(i){if(!i){i=document.createElement("li");i.extra=[];i.selectValue=""}var k=jQuery.trim(i.selectValue?i.selectValue:i.innerHTML);d.lastSelected=k;x=k;h.html("");y.val(k);v();if(u.onItemSelect){setTimeout(function(){u.onItemSelect(i)},1)}}function b(O,k){var N=y.get(0);if(N.createTextRange){var i=N.createTextRange();i.collapse(true);i.moveStart("character",O);i.moveEnd("character",k);i.select()}else{if(N.setSelectionRange){N.setSelectionRange(O,k)}else{if(N.selectionStart){N.selectionStart=O;N.selectionEnd=k}}}N.focus()}function w(i){if(a!=8){y.val(y.val()+i.substring(x.length));b(x.length,i.length)}}function D(){var k=jQuery(d).offset();var i=(u.width>0)?u.width:y.outerWidth();h.css({width:parseInt(i)+"px",top:(k.top+d.offsetHeight)+"px",left:k.left+"px"}).show()}function c(){if(G){clearTimeout(G)}G=setTimeout(v,200)}function v(){if(G){clearTimeout(G)}y.removeClass(u.loadingClass);if(h.is(":visible")){h.hide()}if(u.mustMatch){var i=y.val();if(i!=d.lastSelected){r(null)}}}function g(k,i){if(i){y.removeClass(u.loadingClass);q.innerHTML="";H=-1;if(!l||i.length==0){return v()}if(jQuery.browser.msie){h.append(document.createElement("iframe"))}q.appendChild(I(i));if(u.autoFill&&(y.val().toLowerCase()==k.toLowerCase())){w(i[0][0])}D()}else{v()}}function f(P){if(!P){return null}var k=[];var O=P.split(u.lineSeparator);for(var N=0;N<O.length;N++){var Q=jQuery.trim(O[N]);if(Q){k[k.length]=Q.split(u.cellSeparator)}}return k}function I(S){var R=document.createElement("ul");var P=S.length;if((u.maxItemsToShow>0)&&(u.maxItemsToShow<P)){P=u.maxItemsToShow}for(var Q=0;Q<P;Q++){var T=S[Q];if(!T){continue}var N=document.createElement("li");if(u.formatItem){N.innerHTML=u.formatItem(T,Q,P);N.selectValue=T[0]}else{N.innerHTML=T[0];N.selectValue=T[0]}var k=null;if(T.length>1){k=[];for(var O=1;O<T.length;O++){k[k.length]=T[O]}}N.extra=k;R.appendChild(N);jQuery(N).hover(function(){jQuery("li",R).removeClass("ac_over");jQuery(this).addClass("ac_over");H=jQuery("li",R).indexOf(jQuery(this).get(0))},function(){jQuery(this).removeClass("ac_over")}).click(function(i){i.preventDefault();i.stopPropagation();r(this)})}return R}function B(k){if(!u.matchCase){k=k.toLowerCase()}var i=u.cacheLength?L(k):null;if(i){g(k,i)}else{if((typeof u.url=="string")&&(u.url.length>0)){if(u.json){jQuery.getJSON(o(k),function(N){e(k,N);g(k,N)})}else{jQuery.get(o(k),function(N){N=f(N);e(k,N);g(k,N)})}}else{y.removeClass(u.loadingClass)}}}function o(O){var k=u.url+"?"+d.name+"="+encodeURI(O);for(var N in u.extraParams){k+="&"+N+"="+encodeURI(u.extraParams[N])}return k}function L(S){if(!S){return null}if(j.data[S]){return j.data[S]}if(u.matchSubset){for(var Q=S.length-1;Q>=u.minChars;Q--){var N=S.substr(0,Q);var T=j.data[N];if(T){var R=[];for(var O=0;O<T.length;O++){var k=T[O];var P=k[0];if(A(P,S)){R[R.length]=k}}return R}}}return null}function A(O,N){if(!u.matchCase){O=O.toLowerCase()}var k=O.indexOf(N);if(k==-1){return false}return k==0||u.matchContains}this.flushCache=function(){m()};this.setExtraParams=function(i){u.extraParams=i};this.findValue=function(){var k=y.val();if(!u.matchCase){k=k.toLowerCase()}var i=u.cacheLength?L(k):null;if(i){F(k,i)}else{if((typeof u.url=="string")&&(u.url.length>0)){jQuery.get(o(k),function(N){N=f(N);e(k,N);F(k,N)})}else{F(k,null)}}};function F(S,R){if(R){y.removeClass(u.loadingClass)}var P=(R)?R.length:0;var N=null;for(var Q=0;Q<P;Q++){var T=R[Q];if(T[0].toLowerCase()==S.toLowerCase()){N=document.createElement("li");if(u.formatItem){N.innerHTML=u.formatItem(T,Q,P);N.selectValue=T[0]}else{N.innerHTML=T[0];N.selectValue=T[0]}var k=null;if(T.length>1){k=[];for(var O=1;O<T.length;O++){k[k.length]=T[O]}}N.extra=k}}if(u.onFindValue){setTimeout(function(){u.onFindValue(N)},1)}}function e(k,i){if(!i||!k||!u.cacheLength){return}if(!j.length||j.length>u.cacheLength){m();j.length++}else{if(!j[k]){j.length++}}j.data[k]=i}};jQuery.extend(jQuery.autocomplete,{defaults:{inputClass:"ac_input",resultsClass:"ac_results",lineSeparator:"\n",cellSeparator:"|",json:true,minChars:1,delay:200,matchCase:0,matchSubset:1,matchContains:0,cacheLength:1,mustMatch:0,extraParams:{},loadingClass:"ac_loading",selectFirst:false,selectOnly:false,maxItemsToShow:-1,autoFill:false,width:0}});jQuery.fn.autocomplete=function(b,a,c){a=jQuery.extend({},jQuery.autocomplete.defaults,a);a.url=b;a.data=((typeof c=="object")&&(c.constructor==Array))?c:null;this.each(function(){var d=this;new jQuery.autocomplete(d,a)});return this};jQuery.fn.autocompleteArray=function(b,a){return this.autocomplete(null,a,b)};jQuery.fn.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1};

(function($){$.fn.marquee=function(settings){settings=$.extend({direction:"top",distance:0,time:100,speed:4,delay:0},settings||{});settings.speed+=(settings.distance%settings.speed);var timer=[];var pause=[];return this.each(function(){var container=this;container.style.overflow="hidden";container.style.position="relative";container.style.height=container.offsetHeight+"px";container.innerHTML+=container.innerHTML;$(this).mouseover(function(){pause[container.id]=true}).mouseout(function(){pause[container.id]=false});timer[container.id]=null;pause[container.id]=false;setTimeout(function(){start(container)},settings.delay)});function start(container){timer[container.id]=setInterval(function(){scrolling(container)},settings.time)}function scrolling(container){if(settings.distance&&settings.delay){if((container.scrollTop+settings.speed)%settings.distance==0){clearInterval(timer[container.id]);setTimeout(function(){start(container)},settings.delay)}if(container.scrollTop%settings.distance!=0)pause[container.id]=false}if(!pause[container.id]){container.scrollTop+=settings.speed}if(container.scrollTop>=container.scrollHeight/2)container.scrollTop=0}}})(jQuery);

(function(a){a.fn.menu=function(l){var e=null;var d=null;var c=null;var i=500;if(l){e=l}var b=this[0];var m=a("ul > li",b);var k=a("ul > li > a[name]",b);var f=k.next();m.hover(function(){d=a(this).children("a")[0].name;j(d,true)},function(){c=setTimeout(function(){h()},i)});h();function j(o,n){g();if(o==null){f.filter(":visible").hide();return}k.each(function(){if(this.name==o){if(n){a(this).next().show()}else{a(this).next().hide()}}else{a(this).next().hide()}})}function h(){j(e,false)}function g(){if(c){clearTimeout(c)}}}})(jQuery);

(function($){$.fn.navigation=function(settings){var active=["",""];var temp=null;var timer=null;var timeout=500;if(!!settings)active=settings;temp=active;var container=this[0];var tags=$("div.mainnav a[name]",container);var subs=$("div.subnav a",container);tags.mouseover(function(){show([this.name])}).mouseout(function(){timer=setTimeout(function(){hide()},timeout)});subs.mouseover(function(e){$("div.subnav a[name].on",container).removeClass("on")});var containers=$("div.subnav ul[id^=nav-]",container);containers.mouseover(function(){clear()}).mouseout(function(){timer=setTimeout(function(){hide()},timeout)});show(active);function show(val){clear();tags.each(function(){if(this.name==val[0])$(this).addClass("on");else $(this).removeClass("on")});containers.each(function(){if(this.id=="nav-"+val[0])$(this).show();else $(this).hide()});$("div.subnav a[name].on",container).removeClass("on");if(val[1]){$("div.subnav ul[id=nav-"+val[0]+"] a[name="+val[1]+"]",container).addClass("on")}temp=val};function hide(){show(active)}function clear(){if(timer)clearTimeout(timer)}}})(jQuery);

(function($){$.extend({tabs:{remoteCount:0}});$.fn.tabs=function(initial,settings){if(typeof initial=='object')settings=initial;settings=$.extend({initial:(initial&&typeof initial=='number'&&initial>0)?--initial:0,disabled:null,remote:false,mouseover:false,hash:false,spinner:'Loading&#8230;',hashPrefix:'remote-tab-',onClick:null,onHide:null,onShow:null,navClass:'nav',selectedClass:'selected',disabledClass:'disabled',containerClass:'container',loadingClass:'loading',tabStruct:'div'},settings||{});$.browser.msie6=$.browser.msie&&($.browser.version&&$.browser.version<7||/MSIE 6.0/.test(navigator.userAgent));function unFocus(){scrollTo(0,0)}return this.each(function(){var container=this;var nav=$('ul.'+settings.navClass,container);nav=nav.size()&&nav||$('ul:eq(0)',container);var tabs=$('a',nav);if(settings.remote){tabs.each(function(){var id='';if(this.hash){var id=this.hash.replace(/^#+/,'');this.href=this.href.replace(/#.*$/,'')}if(!id){id=settings.hashPrefix+(++$.tabs.remoteCount)}var hash='#'+id,url=this.href;this.href=(settings.hash?'#':'')+hash;$('<div id="'+id+'" class="'+settings.containerClass+'"></div>').appendTo(container);$(this).bind('loadRemoteTab',function(e,callback){var $$=$(this).addClass(settings.loadingClass);setTimeout(function(){$(hash).load(url,function(){$(this).attr("_loaded",true);$$.removeClass(settings.loadingClass);callback&&callback()})},0)})})}var containers=$('div.'+settings.containerClass,container);containers=containers.size()&&containers||$('>'+settings.tabStruct,container);nav.is('.'+settings.navClass)||nav.addClass(settings.navClass);containers.each(function(){var $$=$(this);$$.is('.'+settings.containerClass)||$$.addClass(settings.containerClass)});var hasSelectedClass=$('li',nav).index($('li.'+settings.selectedClass,nav)[0]);if(hasSelectedClass>=0){settings.initial=hasSelectedClass}if(location.hash){tabs.each(function(i){if(this.hash.replace(/^#+/,'')==location.hash.replace(/^#+/,'')){settings.initial=i;return false}})}if($.browser.msie){unFocus()}containers.filter(':eq('+settings.initial+')').show().end().not(':eq('+settings.initial+')').hide();$('li',nav).removeClass(settings.selectedClass).eq(settings.initial).addClass(settings.selectedClass);tabs.eq(settings.initial).trigger('loadRemoteTab').end();var onClick=settings.onClick,onHide=settings.onHide,onShow=settings.onShow;if(typeof onShow=='function'){onShow(tabs.eq(settings.initial)[0],containers.filter(':eq('+settings.initial+')')[0])}tabs.bind('triggerTab',function(){var li=$(this).parents('li:eq(0)');if(container.locked||li.is('.'+settings.selectedClass)||li.is('.'+settings.disabledClass)){return false}var hash='#'+this.hash.replace(/^#+/,'');if($.browser.msie){$(this).trigger('click')}else if($.browser.safari){var tempForm=$('<form action="'+hash+'"><div><input type="submit" value="h" /></div></form>').get(0);tempForm.submit();$(this).trigger('click')}else{$(this).trigger('click')}});tabs.bind('disableTab',function(){var li=$(this).parents('li:eq(0)');if($.browser.safari){li.animate({opacity:0},1,function(){li.css({opacity:''})})}li.addClass(settings.disabledClass)});if(settings.disabled&&settings.disabled.length){for(var i=0,k=settings.disabled.length;i<k;i++){tabs.eq(--settings.disabled[i]).trigger('disableTab').end()}};tabs.bind('enableTab',function(){var li=$(this).parents('li:eq(0)');li.removeClass(settings.disabledClass);if($.browser.safari){li.animate({opacity:1},1,function(){li.css({opacity:''})})}});if(settings.mouseover){tabs.bind('mouseover',function(){$(this).trigger('click')})}tabs.bind('click',function(e){var hash='#'+this.hash.replace(/^#+/,'');var clicked=this,li=$(this).parents('li:eq(0)'),toShow=$(hash),toHide=containers.filter(':visible');if(container['locked']||li.is('.'+settings.selectedClass)||li.is('.'+settings.disabledClass)||typeof onClick=='function'&&onClick(this,toShow[0],toHide[0])===false){this.blur();return false}container['locked']=true;if(toShow.size()){function switchTab(){li.addClass(settings.selectedClass).siblings().removeClass(settings.selectedClass);toHide.hide();if(typeof onHide=='function'){onHide(clicked,toShow[0],toHide[0])}toShow.show();if(typeof onShow=='function'){onShow(clicked,toShow[0],toHide[0])}container['locked']=null}if(!settings.remote||toShow.attr("_loaded")){switchTab()}else{$(clicked).trigger('loadRemoteTab',[switchTab])}}else{alert('There is no such container.')}this.blur();if(!settings.hash)return false})})};var tabEvents=['triggerTab','disableTab','enableTab'];for(var i=0;i<tabEvents.length;i++){$.fn[tabEvents[i]]=(function(tabEvent){return function(tab){return this.each(function(){var nav=$('ul.tabs',this);nav=nav.size()&&nav||$('ul:eq(0)',this);var a;if(!tab||typeof tab=='number'){a=$('li a',nav).eq((tab&&tab>0&&tab-1||0))}else if(typeof tab=='string'){a=$('li a[@href$="#'+tab+'"]',nav)}a.trigger(tabEvent)})}})(tabEvents[i])}})(jQuery);


(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var validator=$.data(this[0],'validator');if(validator){return validator;}validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});this.submit(function(event){if(validator.settings.debug)event.preventDefault();function handle(){if(validator.settings.submitHandler){validator.settings.submitHandler.call(validator,validator.currentForm);return false;}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});}return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=false;var validator=$(this[0].form).validate();this.each(function(){valid|=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(a.value);},filled:function(a){return!!$.trim(a.value);},unchecked:function(a){return!a.checked;}});$.format=function(source,params){if(arguments.length==1)return function(){var args=$.makeArray(arguments);args.unshift(source);return $.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!=Array){params=[params];}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.validator=function(options,form){this.settings=$.extend({},$.validator.defaults,options);this.currentForm=form;this.init();};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass);this.errorsFor(element).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)this.element(element);},highlight:function(element,errorClass){$(element).addClass(errorClass);},unhighlight:function(element,errorClass){$(element).removeClass(errorClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",dateDE:"Bitte geben Sie ein g¨¹ltiges Datum ein.",number:"Please enter a valid number.",numberDE:"Bitte geben Sie eine Nummer ein.",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.format("Please enter no more than {0} characters."),minlength:$.format("Please enter at least {0} characters."),rangelength:$.format("Please enter a value between {0} and {1} characters long."),range:$.format("Please enter a value between {0} and {1}."),max:$.format("Please enter a value less than or equal to {0}."),min:$.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator");validator.settings["on"+event.type]&&validator.settings["on"+event.type].call(validator,this[0]);}$(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",delegate).delegate("click",":radio, :checkbox",delegate);if(this.settings.invalidHandler)$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus();}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.formSubmitted=false;this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name)[0];}var rules=$(element).rules();var dependencyMismatch=false;for(method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value,element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method");throw e;}}if(dependencyMismatch)return;if(this.objectLength(rules))this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)return arguments[i];}return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method);if(typeof message=="function")message=message.call(this,rule.parameters,element);this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)toToggle=toToggle.add(toToggle.parents(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass);this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(label).length)this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}this.toShow=this.toShow.add(label);},errorsFor:function(element){return this.errors().filter("[for='"+this.idOrName(element)+"']");},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))return this.findByName(element.name).filter(':checked').length;}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",previous={old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}if(rules.messages){delete rules.messages}return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message;if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var options=$("option:selected",element);return options.length>0&&(element.type=="select-multiple"||($.browser.msie&&!(options[0].attributes['value'].specified)?options[0].text:options[0].value).length>0);case'input':if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])this.settings.messages[element.name]={};this.settings.messages[element.name].remote=typeof previous.message=="function"?previous.message(value):previous.message;param=typeof param=="string"&&{url:param}||param;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){if(response){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};errors[element.name]=response||validator.defaultMessage(element,"remote");validator.showErrors(errors);}previous.valid=response;validator.stopRequest(element,response);}},param));return"pending";}else if(this.pending[element.name]){return"pending";}return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},dateDE:function(value,element){return this.optional(element)||/^\d\d?\.\d\d?\.\d\d\d?\d?$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},numberDE:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:\.\d{3})+)(?:,\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9-]+/.test(value))return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)nDigit-=9;}nCheck+=nDigit;bEven=!bEven;}return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param:"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){return value==$(param).val();}}});})(jQuery);;(function($){var ajax=$.ajax;var pendingRequests={};$.ajax=function(settings){settings=$.extend(settings,$.extend({},$.ajaxSettings,settings));var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}return(pendingRequests[port]=ajax.apply(this,arguments));}return ajax.apply(this,arguments);};})(jQuery);;(function($){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){if($.browser.msie)return false;this.addEventListener(original,$.event.special[fix].handler,true);},teardown:function(){if($.browser.msie)return false;this.removeEventListener(original,$.event.special[fix].handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};});$.extend($.fn,{delegate:function(type,delegate,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});},triggerEvent:function(type,target){return this.triggerHandler(type,[$.event.fix({type:type,target:target})]);}})})(jQuery);

(function(a){a.fn.warning=function(c,b){if(c==undefined||c==""){return this.html("").removeClass("warning").hide()}return this.each(function(){var d=a(this);if(d.attr("timeout")){clearTimeout(d.attr("timeout"));d.removeAttr("timeout")}d.html(c).addClass("warning").show();if(b){d.attr("timeout",setTimeout(function(){d.warning()},b))}})};a.fn.keyhint=function(d,c){if(!c){c="gray"}var b=a(this);b.focus(function(){b.filter("."+c).removeClass(c).val("")}).blur(function(){if(this.value==""){b.addClass(c).val(this.title)}}).each(function(){if(this.value==""||this.value==this.title){b.addClass(c).val(this.title)}});b.parents("form:eq(0)").submit(function(){if(d){b.filter("."+c).removeClass(c).val("")}else{if(b.hasClass(c)||b.val()==""){alert(b.attr("title"));b.focus();return false}}});return this};a.fn.rowover=function(b,c){if(!b){b="over"}if(!c){c="bgblue"}this.filter(":odd").addClass(c);return this.hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)})};a.fn.scrollToY=function(){window.scrollTo(0,this.offset().top);return this};a.fn.disabled=function(){return this.find(":input").attr("disabled",true).end()};a.fn.enabled=function(){return this.find(":input").not("[_disabled]").attr("disabled",false).end()};a.cookie=function(c,j,n){if(typeof j!="undefined"){n=n||{};if(j===null){j="";n.expires=-1}var e="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var f;if(typeof n.expires=="number"){f=new Date();f.setTime(f.getTime()+(n.expires*24*60*60*1000))}else{f=n.expires}e="; expires="+f.toUTCString()}var m=n.path?"; path="+n.path:"";var g=n.domain?"; domain="+n.domain:"";var b=n.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(j),e,m,g,b].join("")}else{var k=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var h=0;h<l.length;h++){var d=a.trim(l[h]);if(d.substring(0,c.length+1)==(c+"=")){k=decodeURIComponent(d.substring(c.length+1));break}}}return k}};a.func={ismobile:function(c){var b=/^1[35]{1}[0-9]{9}$|^852[69]{1}[0-9]{7}$|^88609[0-9]{8}$|^853[6]{1}[0-9]{7}$/;return b.test(c)},isemail:function(c){var b=/^[\w-+\.]+@([\w-]+\.)+[\w-]{2,}$/i;return b.test(c)},iscnchar:function(c){var b=/^[\u4E00-\u9FA5]+$/;return b.test(c)},isbyte:function(c){var b=/^[\x00-\xff]+$/;return b.test(c)},isdomainstr:function(d,c){var b=/^[0-9a-z\u4E00-\u9FA5]+(-[0-9a-z\u4E00-\u9FA5]+)*$/;if(!b.test(d)){return false}if(c=="en"&&!(/^[0-9a-z-]+$/i).test(d)){return false}if(c=="cn"&&!(/[\u4E00-\u9FA5]/).test(d)){return false}return true},isdomain:function(e,d){var c=/^([^-]+(-[^-]+)*)(\.([^-]+(-[^-]+)*))*(\.([a-z\u4E00-\u9FA5]+))$/i;var b=/^[-0-9a-z\u4E00-\u9FA5\.]+$/i;if(d=="en"){b=/^[-0-9a-z\.]+$/i}if(d=="cn"){b=/[\u4E00-\u9FA5]/}return(c.test(e)&&b.test(e))},isip:function(c){var b=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$/;return b.test(c)},isInt:function(c){var b=/^\d+$/;return b.test(c)},checkInt:function(b){b=parseInt(b,10);return isNaN(b)?0:b},parseStr:function(d){var c=d.replace(/^#+|^\?/,"");var b=[];a(c.split("&")).each(function(){var e=this.split("=",2);b[e[0]]=e[1]?decodeURIComponent(e[1].replace(/\+/g," ")):null});return b},parseDateTime:function(b){var e=new Date();var c=0;var d;var f;b=b.split(" ");if(b.length==2){d=b[0];f=b[1]}else{if(b.length=1){d=b[0];f=" "}else{return null}}d=d.split("-");if(d.length!=3){return null}else{c=parseInt(d[0],10);if(c!=NaN){e.setFullYear(c)}c=parseInt(d[1],10);if(c!=NaN){e.setMonth(c-1)}c=parseInt(d[2],10);if(c!=NaN){e.setDate(c)}}f=f.split(":");if(f.length==3){c=parseInt(f[0],10);if(c!=NaN){e.setHours(c)}c=parseInt(f[1],10);if(c!=NaN){e.setMinutes(c)}c=parseInt(f[2],10);if(c!=NaN){e.setSeconds(c)}}return e}};a.validator.methods.account=function(e,c,f){var d=/^[0-9a-zA-Z]+(-[0-9a-zA-Z]+)*$/;var b=/^\d+$/;return this.required(c)||(d.test(e)&&!b.test(e))};a.validator.methods.minLengthW=function(e,d,f){var b=0;for(var c=0;c<e.length;c++){charCode=e.charCodeAt(c);if(charCode<0||charCode>255){b+=2}else{b++}}return this.required(d)||(b>=f)};a.validator.methods.password=function(d,b,e){var c=/^\d+$/;return this.required(b)||(!c.test(d))};a.validator.methods.question=function(c,b,d){return this.required(b)||false};a.validator.methods.mobile=function(c,b,d){return this.required(b)||a.func.ismobile(c)};a.validator.methods.cnname=function(d,b,e){var c=/^[\u4E00-\u9FA5]+$/;return this.required(b)||c.test(d)};a.validator.methods.enname=function(d,b,e){var c=/^[a-zA-Z]+[ ]{1}[A-Za-z]+$/;return this.required(b)||c.test(d)};a.validator.methods.isbyte=function(c,b,d){return this.required(b)||a.func.isbyte(c)};a.validator.methods.containCnChar=function(d,b,e){var c=/[\u4E00-\u9FA5]/;return this.required(b)||c.test(d)};a.validator.methods.dateLT=function(c,b,d){if(Number(a.func.parseDateTime(a(d).val()))>Number(a.func.parseDateTime(c))){return this.required(b)||false}return true}})(jQuery);

(function(a){a.window=function(d){var c=this;this.opts=a.extend({},a.window.defaults,d);this.fixIE=(a.browser.msie&&(a.browser.version<7));this.id=Math.random();if(!this.opts.applyTo){return}var b=a(this.opts.applyTo);this.dialog={container:b,header:b.find(".window-header"),body:b.find(".window-body"),footer:b.find(".window-footer")};this.bh=a("#fix-height");if(!this.bh.size()){this.bh=a("<div>").attr("id","fix-height").css({position:"absolute",height:"100%",width:1,left:-100,top:0}).appendTo(document.body)}this.fn={show:this.opts.show,close:this.opts.close};if(this.fixIE){this.iframe=a('<iframe src="javascript:false;">').css({opacity:0,position:"absolute",zIndex:1000,width:"100%",top:0,left:0}).hide().appendTo("body")}if(this.opts.draggable&&a.fn.drag){this.dialog.container.drag(this.opts.drag)}this.mask=a('<div class="mask">').appendTo(document.body).hide();this.dialog.container.hide().appendTo(document.body);this.dialog.container.find("."+this.opts.closeCls).click(function(f){f.preventDefault();c.close()});this.dialog.container.css({height:this.opts.height,width:this.opts.width});return this};a.window.prototype={show:function(){if(this.iframe){this.iframe.show()}this.mask.show();this.resizeMask();this.dialog.container.show();this.center();if(a.isFunction(this.fn.show)){this.fn.show.apply(this,[this.dialog])}this.bindEvents()},close:function(){if(this.iframe){this.iframe.hide()}this.mask.hide();this.dialog.container.hide();if(a.isFunction(this.fn.close)){this.fn.close.apply(this,[this.dialog])}this.unbindEvents()},resizeMask:function(){if(this.fixIE){var b=Math.max(document.body.offsetHeight,this.bh.height());var c=document.body.offsetWidth;this.mask.css({height:b,width:c})}else{this.mask.css("position","fixed")}},center:function(){var b=(document.body.offsetWidth-a(this.dialog.container).width())/2;var c=((Math.min(this.bh.height(),document.documentElement.offsetHeight)-this.dialog.container.height())/2+Math.max(document.documentElement.scrollTop,document.body.scrollTop));this.dialog.container.css({left:b,top:c})},bindEvents:function(){var b=this;if(this.fixIE){a(window).bind("resize",function(){b.resizeMask()})}},unbindEvents:function(){var b=this;if(this.fixIE){a(window).unbind("resize",function(){b.resizeMask()})}}};a.fn.window=function(c){var b=this[0];return b&&b.window?b.window:b.window=new a.window(a.extend(c,{applyTo:b,id:b.id}))};a.window.defaults={id:"window",width:500,height:"auto",close:true,closeCls:"close",draggable:false,onOpen:null,onShow:null,onClose:null};a.window.prototype2={id:null,defaults:{id:"window",width:500,height:"auto",close:true,closeCls:"close",draggable:false,onOpen:null,onShow:null,onClose:null},show2:function(){console.log(this);return;this.mask.show().setSize();if(this.dialog.iframe){this.dialog.iframe.show()}this.dialog.container.show();this.center();this.bindEvents();if(a.isFunction(this.fn.onShow)){this.fn.onShow.apply(this,[this.dialog])}},container:"body",dialog:{},fn:{},init:function(b){console.log(this);return;this.opts=a.extend({},a.window.defaults,b);this.dialog.container=a("<div>");if(this.opts.applyTo){this.dialog.container=a(this.opts.applyTo);this.dialog.header=this.dialog.container.find(".window-header");this.dialog.body=this.dialog.container.find(".window-body");this.dialog.footer=this.dialog.container.find(".window-footer")}this.fn.onShow=this.opts.onShow;this.fn.onClose=this.opts.onClose;this.create();this.resize();return this},create:function(){var b=this;this.container=a(this.container);this.mask=a('<div class="mask">');if(!this.dialog.header){this.dialog.header=a("<div>").addClass("window-header");this.dialog.container.append(this.dialog.header)}if(!this.dialog.body){this.dialog.body=a("<div>").addClass("window-body");this.dialog.container.append(this.dialog.body)}if(!this.dialog.container){this.dialog.container=a("<div>").attr("id",this.opts.id).addClass("window").css({height:this.opts.height,width:this.opts.width}).hide()}if(this.dialog.footer){this.dialog.container.append(this.dialog.footer)}this.mask.appendTo(this.container).hide();this.dialog.container.hide().appendTo("body");this.container.find("."+this.opts.closeCls).click(function(c){c.preventDefault();b.close()});if(this.fixIE){this.dialog.iframe=a('<iframe src="javascript:false;">').css({opacity:0,position:"absolute",zIndex:1000,width:"100%",top:0,left:0}).hide().appendTo("body")}if(this.opts.draggable&&a.fn.drag){this.dialog.container.drag(this.opts.drag)}this.mask.setSize=function(){if(b.fixIE){var c=Math.max(b.container.height(),b.bh.height());var d=b.container.width();b.mask.css({height:c,width:d});if(b.dialog.iframe){b.dialog.iframe.css({height:c,width:d})}}else{b.mask.css("position","fixed")}};this.center=function(){var c=(b.container.width()-a(b.dialog.container).width())/2;var d=((Math.min(b.bh.height(),document.documentElement.offsetHeight)-b.dialog.container.height())/2+Math.max(document.documentElement.scrollTop,document.body.scrollTop));b.dialog.container.css({left:c,top:d})}},resize:function(){alert(this.dialog.container.attr("id"));this.dialog.container.css({height:this.opts.height,width:this.opts.width})},bindEvents:function(){if(this.fixIE){a(window).bind("resize",this.mask.setSize)}a(window).bind("resize",this.center)},unbindEvents:function(){if(this.fixIE){a(window).unbind("resize",this.mask.setSize)}a(window).unbind("resize",this.center)},showMask:function(){},_center:function(){var b=(this.container.width()-a(this.dialog.container).width())/2;var c=((this.bh.height()-this.dialog.container.height())/2+Math.max(document.documentElement.scrollTop,document.body.scrollTop));this.dialog.container.css({left:b,top:c})},close:function(b){this.mask.hide();if(this.dialog.iframe){this.dialog.iframe.hide()}this.dialog.container.hide();this.unbindEvents();if(a.isFunction(this.fn.onClose)){this.fn.onClose.apply(this,[this.dialog])}}}})(jQuery);

(function(b){var a=b.fn.drag=function(e){if(e===false){return this.unbind("mousedown",d)}e=b.extend({not:":input",handle:".handle",distance:0,which:1,constrain:true,drag:function(g){b(this).css({top:g.offsetY,left:g.offsetX})}},e||{});e.distance=f(e.distance);this.bind("mousedown",{options:e},d);function d(m){var l=this,k,n=m.data||{},j=n.options||{};if(n.elem){l=n.elem;m.cursorOffsetX=n.pageX-n.left;m.cursorOffsetY=n.pageY-n.top;m.offsetX=m.pageX-m.cursorOffsetX;m.offsetY=m.pageY-m.cursorOffsetY}else{if(a.dragging||(j.which>0&&m.which!=j.which)||b(m.target).is(j.not)){return}}switch(m.type){case"mousedown":if(j.handle&&b(l).find(j.handle).size()&&!(b(m.target).is(j.handle)||b(m.target).parents(j.handle).size())){return}b.extend(n,b(l).offset(),{elem:l,target:m.target,pageX:m.pageX,pageY:m.pageY});b.event.add(document,"mousemove mouseup",d,n);c(l,false);return false;case !a.dragging&&"mousemove":if(f(m.pageX-n.pageX)+f(m.pageY-n.pageY)<j.distance){break}m.target=n.target;if(j.dragstart&&j.dragstart.apply(l,[m])===false){break}a.dragging=true;case a.dragging&&"mousemove":if(j.dragging&&j.dragging.apply(l,[m])===false){break}if(j.constrain){if(m.offsetX<0){m.offsetX=0}if(m.offsetY<0){m.offsetY=0}var g=(document.body.scrollWidth-l.offsetWidth);var i=(document.body.offsetHeight-l.offsetHeight);if(m.offsetX>g){m.offsetX=g}if(m.offsetY>i){m.offsetY=i}}if(j.drag.apply(l,[m])!==false){break}m.type="mouseup";case"mouseup":b.event.remove(document,"mousemove mouseup",d);if(a.dragging&&j.dragend){j.dragend.apply(l,[m])}c(l,true);a.dragging=n.elem=null;break}}function f(g){return Math.pow(g,2)}function c(h,g){if(!h){return}h.unselectable=g?"off":"on";h.onselectstart=function(){return g};if(document.selection&&document.selection.empty){document.selection.empty()}if(h.style){h.style.MozUserSelect=g?"":"none"}}}})(jQuery);
